(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["play"],{"0c99":function(t,e,i){"use strict";var s=i("8e36"),o=i.n(s);o.a},4725:function(t,e,i){},6447:function(t,e,i){},6886:function(t,e,i){"use strict";var s=i("cf4d"),o=i.n(s);o.a},7251:function(t,e,i){"use strict";var s=i("d81f"),o=i.n(s);o.a},"8e36":function(t,e,i){},a003:function(t,e,i){"use strict";var s=i("4725"),o=i.n(s);o.a},aa77:function(t,e,i){var s=i("5ca1"),o=i("be13"),a=i("79e5"),n=i("fdef"),r="["+n+"]",l="​",c=RegExp("^"+r+r+"*"),d=RegExp(r+r+"*$"),u=function(t,e,i){var o={},r=a(function(){return!!n[t]()||l[t]()!=l}),c=o[t]=r?e(p):n[t];i&&(o[i]=c),s(s.P+s.F*r,"String",o)},p=u.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},b1f6:function(t,e,i){"use strict";var s=i("6447"),o=i.n(s);o.a},c5f6:function(t,e,i){"use strict";var s=i("7726"),o=i("69a8"),a=i("2d95"),n=i("5dbc"),r=i("6a99"),l=i("79e5"),c=i("9093").f,d=i("11e9").f,u=i("86cc").f,p=i("aa77").trim,v="Number",h=s[v],f=h,m=h.prototype,y=a(i("2aeb")(m))==v,g="trim"in String.prototype,x=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():p(e,3);var i,s,o,a=e.charCodeAt(0);if(43===a||45===a){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:s=2,o=49;break;case 79:case 111:s=8,o=55;break;default:return+e}for(var n,l=e.slice(2),c=0,d=l.length;c<d;c++)if(n=l.charCodeAt(c),n<48||n>o)return NaN;return parseInt(l,s)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof h&&(y?l(function(){m.valueOf.call(i)}):a(i)!=v)?n(new f(x(e)),i,h):x(e)};for(var C,_=i("9e1e")?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;_.length>k;k++)o(f,C=_[k])&&!o(h,C)&&u(h,C,d(f,C));h.prototype=m,m.constructor=h,i("2aba")(s,v,h)}},c74c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"playvideo"}},[i("HeaderNav"),i("div",{staticClass:"play"},[i("div",{attrs:{id:"content"}},[i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[i("h2",[t._v(t._s(t.video.title))]),i("span",[t._v(t._s(t.video.xyvideotype.typename))]),t._v(">>\n          "),i("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.video.time))]),i("p",[t._v("\n            "+t._s(t.video.click)+"播放 50 弹幕\n            "),i("span",[t._v("未经作者授权，禁止转载")])])]),t._m(0),i("div",{staticClass:"video-toolbar"},[i("div",{staticClass:"ops"},[i("span",{staticClass:"like",attrs:{title:"点赞数"+t.video.clickup},on:{click:t.videolike}},[i("i",{staticClass:"iconfont icon-dianzan",class:t.videoUp.like?"ups":""}),t._v("\n              "+t._s(t.video.clickup)+"\n            ")]),i("span",{staticClass:"coin",attrs:{title:"投硬币枚数6359"}},[i("i",{staticClass:"iconfont icon-Bbi",class:t.videoUp.coin?"ups":""}),t._v("\n              6359\n            ")]),i("span",{staticClass:"collect",attrs:{title:"收藏人数"+t.video.commendcount},on:{click:t.videocoll}},[i("i",{staticClass:"iconfont icon-shoucang",class:t.videoUp.collect?"ups":""}),t._v("\n              "+t._s(t.video.commendcount)+"\n            ")]),i("span",{staticClass:"share",attrs:{title:"分享"}},[i("i",{staticClass:"iconfont icon-fenxiang"}),t._v("分享\n              "),i("div",{staticClass:"share-box"},[i("div",{staticClass:"share-pos"},[i("div",{staticClass:"box-a"},[i("div",{staticClass:"share-address"},[i("p",{staticClass:"t"},[t._v("将视频贴到博客或论坛")]),i("ul",[i("li",[i("span",{staticClass:"name"},[t._v("视频地址")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.thisurl,expression:"thisurl"}],attrs:{id:"link0",type:"text",title:t.thisurl,disabled:""},domProps:{value:t.thisurl},on:{input:function(e){e.target.composing||(t.thisurl=e.target.value)}}}),i("span",{staticClass:"btn",on:{click:t.copyurl}},[t._v("复制")])])])])])])])])])]),i("div",{staticClass:"text"},[i("div",{staticClass:"info"},[t._v(t._s(t.video.videonote))]),i("div",{staticClass:"tag"},[i("ul",{staticClass:"clearfix"},t._l(t.tags,function(e,s){return i("li",{key:s,staticClass:"tags"},[i("a",{attrs:{href:"#"}},[t._v(t._s(e))])])}),0)])]),i("Videopl")],1),i("div",{staticClass:"right"},[i("div",{staticClass:"u-upinfo"},[i("div",{staticClass:"u-face"},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getup(t.video.userid)}}},[i("img",{attrs:{src:t.video.xyuserinfo.userphoto}})])]),i("div",{staticClass:"u-info"},[i("div",{staticClass:"name",staticStyle:{"line-height":"20px",height:"20px"}},[i("a",{staticClass:"username",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getup(t.video.userid)}}},[t._v(t._s(t.video.xyuser.username))]),t._m(1)]),i("div",{staticClass:"desc",attrs:{title:t.video.xyuserinfo.usershow}},[t._v(t._s(t.video.xyuserinfo.usershow))])]),i("a",{staticClass:"bi-btn b-gz",class:t.video.followstatus?"followed":"",on:{click:t.follow}},[i("span",{staticClass:"gz"},[t.video.followstatus?[i("i",{staticClass:"van-icon-general_addto_s"}),t._v("已关注\n              ")]:[i("i",{staticClass:"van-icon-general_addto_s"}),t._v("关注\n              ")]],2)])]),i("div",{staticClass:"reco_list"},[i("div",{staticClass:"rec-title"},[t._v("相关视频推荐")]),i("div",{staticClass:"rec-list"},t._l(t.recommendedvideo,function(e){return i("div",{key:e.videoid,staticClass:"video-page-card"},[i("div",{staticClass:"card-box"},[i("div",{staticClass:"pic-box"},[i("div",{staticClass:"pic"},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.govideo(e.videoid)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picture,expression:"item.picture"}]})]),i("span",{staticClass:"mask-video"}),i("span",{staticClass:"duration"},[t._v(t._s(e.timelong))])])]),i("div",{staticClass:"info"},[i("a",{staticClass:"title",attrs:{href:"#",title:e.title},on:{click:function(i){return i.preventDefault(),t.govideo(e.videoid)}}},[t._v(t._s(e.title))]),i("div",{staticClass:"count up"},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.getup(e.userid)}}},[t._v(t._s(e.xyuser.username))])]),i("div",{staticClass:"count"},[t._v(t._s(e.click)+"播放 · "+t._s(e.clickup)+"点赞")])])])])}),0)])])])])],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video",attrs:{id:"videodan"}},[i("div",{attrs:{id:"danmup"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"message",attrs:{href:"#"}},[i("i",{staticClass:"van-icon-videodetails_messag"}),t._v("发消息\n              ")])}],a=(i("c5f6"),i("f499")),n=i.n(a),r=(i("28a5"),i("bc3a")),l=i.n(r),c=i("c0d6"),d=i("387d"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"videopl"},[i("div",{staticClass:"common"},[i("div",{staticClass:"common-head"},[i("span",{staticClass:"result"},[t._v(t._s(t.pagetotal))]),i("span",[t._v("评论")])]),i("div",{staticClass:"commit"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"全部评论",name:"all"}},[i("div",{staticClass:"comment-send"},[i("div",{staticClass:"user-face"},[i("img",{attrs:{src:t.islogio.imgurl,alt:""}})]),i("div",{staticClass:"textarea-container"},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:t.islogio.placeholders,title:t.islogio.placeholders,resize:"none",disabled:t.islogio.disshow},model:{value:t.topinput,callback:function(e){t.topinput="string"===typeof e?e.trim():e},expression:"topinput"}}),i("el-button",{attrs:{type:"primary",disabled:t.islogio.disshow},on:{click:function(e){return t.subreply("top")}}},[t._v("发表评论")])],1)]),t.replyList.length?[i("div",{staticClass:"comment-list"},[t._l(t.replyList,function(e,s){return[i("Videocomment",{key:e.commentid,attrs:{todo:e,ftodo:t.reply,noborder:0==s},on:{handtodo:t.countAdd}})]})],2),i("div",{staticClass:"bottom-page paging-box-big"},[i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":5,layout:"total, prev, pager, next, jumper",total:t.pagetotal},on:{"current-change":t.pageGo,"prev-click":t.prevGo,"next-click":t.nextGo}})],1)]),i("div",{staticClass:"comment-send"},[i("div",{staticClass:"user-face"},[i("img",{attrs:{src:t.islogio.imgurl,alt:""}})]),i("div",{staticClass:"textarea-container"},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:t.islogio.placeholders,title:t.islogio.placeholders,resize:"none",disabled:t.islogio.disshow},model:{value:t.bottominput,callback:function(e){t.bottominput="string"===typeof e?e.trim():e},expression:"bottominput"}}),i("el-button",{attrs:{type:"primary",disabled:t.islogio.disshow},on:{click:function(e){return t.subreply("bottom")}}},[t._v("发表评论")])],1)])]:t._e()],2),i("el-tab-pane",{attrs:{label:"按热度排序",name:"hot"}},[i("div",{staticClass:"comment-send"},[i("div",{staticClass:"user-face"},[i("img",{attrs:{src:t.islogio.imgurl,alt:""}})]),i("div",{staticClass:"textarea-container"},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:t.islogio.placeholders,title:t.islogio.placeholders,resize:"none",disabled:t.islogio.disshow},model:{value:t.topinput,callback:function(e){t.topinput="string"===typeof e?e.trim():e},expression:"topinput"}}),i("el-button",{attrs:{type:"primary",disabled:t.islogio.disshow},on:{click:function(e){return t.subreply("top")}}},[t._v("发表评论")])],1)]),t.hotpl.length?[i("div",{staticClass:"comment-list"},[t._l(t.hotpl,function(e,s){return[i("Videocomment",{key:e.commentid,attrs:{todo:e,ftodo:t.reply,noborder:0==s},on:{handtodo:t.countAdd}})]})],2),i("div",{staticClass:"bottom-page paging-box-big"},[i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":5,layout:"total, prev, pager, next, jumper",total:t.hottotal},on:{"current-change":t.hotpageGo,"prev-click":t.hotprevGo,"next-click":t.hotnextGo}})],1)]),i("div",{staticClass:"comment-send"},[i("div",{staticClass:"user-face"},[i("img",{attrs:{src:t.islogio.imgurl,alt:""}})]),i("div",{staticClass:"textarea-container"},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:t.islogio.placeholders,title:t.islogio.placeholders,resize:"none",disabled:t.islogio.disshow},model:{value:t.bottominput,callback:function(e){t.bottominput="string"===typeof e?e.trim():e},expression:"bottominput"}}),i("el-button",{attrs:{type:"primary",disabled:t.islogio.disshow},on:{click:function(e){return t.subreply("bottom")}}},[t._v("发表评论")])],1)])]:t._e()],2)],1)],1)])])},p=[],v=(i("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-item"},[i("div",{staticClass:"user-face"},[i("a",{attrs:{href:"#"}},[i("img",{attrs:{src:t.vtodo.xyuserinfo.userphoto,alt:""}})])]),i("div",{staticClass:"con",class:{"no-border":t.noborder}},[i("div",{staticClass:"user"},[i("a",{staticClass:"name",attrs:{href:"#"}},[t._v(t._s(t.vtodo.xyuser.username))]),i("a",{attrs:{href:"#"}},[i("i",{staticClass:"level",class:t.levon})])]),i("p",{staticClass:"text"},[t._v("\n      "+t._s(t.vtodo.commentcontain)+"\n    ")]),i("div",{staticClass:"info"},[i("span",{staticClass:"time"},[t._v(t._s(t.vtodo.time))]),i("span",{staticClass:"like",on:{click:t.like}},[i("i",{class:t.likeOrhaldstats}),i("span",[t._v(t._s(t.vtodo.commentup))])]),i("span",{staticClass:"hate",on:{click:t.hate}},[i("i",{class:t.likeOrhaldstats}),i("span",[t._v(t._s(t.vtodo.commentdown))])]),i("span",{staticClass:"reply",on:{click:t.reply}},[t._v("回复")]),i("span",{staticClass:"reply",on:{click:t.morereply}},[t.isshow?t._e():[t._v("查看回复")],t.isshow?[t._v("收起回复")]:t._e()],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"reply-box"},[t._l(t.response,function(e,s){return[i("Videoreply",{key:s,attrs:{replylist:e,levon:t.levon}})]}),0!=t.replycount?i("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:t.replycount,"page-size":5,"current-page":t.replyindex},on:{"current-change":t.pageGo,"prev-click":t.prevGo,"next-click":t.nextGo}}):t._e()],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.vtodo===t.vftodo&&t.rps,expression:" vtodo === vftodo && rps "}],staticClass:"comment-send"},[i("div",{staticClass:"user-face"},[i("img",{attrs:{src:t.islogio.imgurl,alt:""}})]),i("div",{staticClass:"textarea-container"},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:t.islogio.placeholders,title:t.islogio.placeholders,resize:"none",disabled:t.islogio.disshow},model:{value:t.input,callback:function(e){t.input="string"===typeof e?e.trim():e},expression:"input"}}),i("el-button",{attrs:{type:"primary",disabled:t.islogio.disshow},on:{click:t.commitreply}},[t._v("发表评论")])],1)])])])}),h=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reply-item"},[i("a",{staticClass:"reply-face",attrs:{href:"#"}},[i("img",{attrs:{src:t.Vreplylist.xyuserinfo.userphoto,alt:""}})]),i("div",{staticClass:"reply-con"},[i("div",{staticClass:"user"},[i("a",{staticClass:"name",attrs:{href:"#"}},[t._v(t._s(t.Vreplylist.xyuser.username))]),i("a",{attrs:{href:"#"}},[i("i",{staticClass:"level",class:t.levon})]),i("span",{staticClass:"text-con"},[t._v(t._s(t.Vreplylist.vrcontent))])]),i("div",{staticClass:"info"},[i("span",{staticClass:"time"},[t._v(t._s(t.Vreplylist.time))])])])])},m=[],y={name:"videoreply",props:["replylist"],data:function(){return{Vreplylist:this.replylist}},computed:{levon:function(){return"i".concat(this.Vreplylist.xyuser.gradeid)}}},g=y,x=(i("b1f6"),i("2877")),C=Object(x["a"])(g,f,m,!1,null,"3dfff6d8",null),_=C.exports,k={store:c["a"],name:"videocomments",props:["noborder","todo","ftodo"],components:{Videoreply:_},methods:{reply:function(){this.rps?this.rps=!1:this.rps=!0,this.$emit("handtodo",this.vtodo)},morereply:function(){if(this.isshow)this.isshow=!1;else{if(this.isshow=!0,this.response.length)return;this.queryResponse(this.replyindex)}},like:function(){"{}"!=n()(c["a"].state.user)&&this.likeOrhate("xyvideocomment/updateAddUpById.do","like")},hate:function(){"{}"!=n()(c["a"].state.user)&&this.likeOrhate("xyvideocomment/updateAddDownById.do","hate")},likeOrhate:function(t,e){var i=this,s=this.$route.query.vdId;this.axios.get(t,{params:{videocommentid:this.vtodo.commentid,videoid:s}}).then(function(t){"like"===e?0==t.data.xyuser?(void 0!=i.vtodo.clickupstatus&&i.vtodo.commentdown--,i.vtodo.commentup++,i.$set(i.vtodo,"clickupstatus",!0)):1==t.data.xyuser&&(i.vtodo.commentup--,i.$delete(i.vtodo,"clickupstatus")):0==t.data.xyuser?(void 0!=i.vtodo.clickupstatus&&i.vtodo.commentup--,i.vtodo.commentdown++,i.$set(i.vtodo,"clickupstatus",!1)):1==t.data.xyuser&&(i.vtodo.commentdown--,i.$delete(i.vtodo,"clickupstatus"))})},queryResponse:function(t){var e=this,i=this.vtodo.commentid;this.axios.get("xyvideoreply/findPageByCommentid.do",{params:{commentid:i,page:t}}).then(function(t){e.response=t.data.xyuser,e.replycount=t.data.count})},commitreply:function(){var t=this;if(this.input.length){var e=this.vtodo.commentid;this.axios.get("xyvideoreply/insertByUserId.do",{params:{commentid:e,vrcontent:this.input}}).then(function(e){1===e.data.xyuser?t.$notify({title:"成功",message:"回复成功",type:"success",onClose:function(){t.input="",t.queryResponse(t.replyindex)},duration:1e3}):t.$notify.error({title:"错误",message:"回复失败",duration:1e3})})}},pageGo:function(t){this.replyindex=t,this.queryResponse(t)},nextGo:function(t){this.replyindex=t,this.queryResponse(t)},prevGo:function(t){this.replyindex=t,this.queryResponse(t)},islogioto:function(){"{}"==n()(c["a"].state.user)?this.islogio={disshow:!0,placeholders:"请先登录后发表评论 (・ω・)",imgurl:"http://cdn.hwzhj.top/img/default.gif"}:this.islogio={disshow:!1,placeholders:"请输入内容",imgurl:c["a"].state.user.xyuserinfo.userphoto}}},computed:{vtodo:function(){return this.todo},vftodo:function(){return this.ftodo},levon:function(){return"i".concat(this.vtodo.xyuser.gradeid)},likeOrhaldstats:function(){return void 0!=this.vtodo.clickupstatus?this.vtodo.clickupstatus?"cur":"cus":""}},data:function(){return{input:"",rps:!1,isshow:!1,response:[],replycount:0,replyindex:1,islogio:{}}},created:function(){},mounted:function(){this.islogioto()}},b=k,w=(i("a003"),Object(x["a"])(b,v,h,!1,null,"7952bf4f",null)),I=w.exports,N={store:c["a"],name:"videopl",data:function(){return{activeName:"all",topinput:"",bottominput:"",currentPage:1,pagetotal:null,reply:null,replyList:[],replylikeOrhald:[],islogio:{},hotpl:[],hotPage:1,hottotal:null}},components:{Videocomment:I},methods:{handleClick:function(t,e){"全部评论"==e.target.innerHTML?this.getpl(this.currentPage):this.gethotpl(this.hotPage)},countAdd:function(t){this.reply=t},getpl:function(t){var e=this,i=this.$route.query.vdId;this.axios.get("xyvideocomment/findPageByVideoId.do",{params:{videoid:i,page:t}}).then(function(t){e.pagetotal=t.data.count,e.replyList=t.data.xyuser;var s=c["a"].state.user;"{}"!=n()(s)&&e.axios.get("xyclickup/findByUseridAndVideoId.do",{params:{videoid:i}}).then(function(t){e.replylikeOrhald=t.data.xyuser,e.diffLike()})})},subreply:function(t){var e=this,i=this.$route.query.vdId,s="";if("top"==t){if(!this.topinput.length)return;s=this.topinput}else{if(!this.bottominput.length)return;s=this.bottominput}this.axios.get("xyvideocomment/insertById.do",{params:{videoid:i,commentcontain:s}}).then(function(t){1===t.data.xyuser?e.$notify({title:"成功",message:"评论成功",type:"success",onClose:function(){e.topinput="",e.bottominput="",e.getpl(e.currentPage)},duration:1e3}):e.$notify.error({title:"错误",message:"评论失败",duration:1e3})})},pageGo:function(t){this.currentPage=t,this.getpl(t)},nextGo:function(t){this.currentPage=t,this.getpl(t)},prevGo:function(t){this.currentPage=t,this.getpl(t)},diffLike:function(){var t=this,e=0;this.replyList.forEach(function(i){t.replylikeOrhald.forEach(function(s){i.commentid===s.videocommentid&&(0==s.clickupstatus?t.$set(t.replyList[e],"clickupstatus",!0):t.$set(t.replyList[e],"clickupstatus",!1))}),e++})},diffLikeHot:function(){var t=this,e=0;this.hotpl.forEach(function(i){t.replylikeOrhald.forEach(function(s){i.commentid===s.videocommentid&&(0==s.clickupstatus?t.$set(t.hotpl[e],"clickupstatus",!0):t.$set(t.hotpl[e],"clickupstatus",!1))}),e++})},islogioto:function(){"{}"==n()(c["a"].state.user)?this.islogio={disshow:!0,placeholders:"请先登录后发表评论 (・ω・)",imgurl:"http://cdn.hwzhj.top/img/default.gif"}:this.islogio={disshow:!1,placeholders:"请输入内容",imgurl:c["a"].state.user.xyuserinfo.userphoto}},gethotpl:function(t){var e=this,i=this.$route.query.vdId;this.axios.get("xyvideocomment/findPageByVideoIdUp.do",{params:{videoid:i,page:t}}).then(function(t){e.hottotal=t.data.count,e.hotpl=t.data.xyuser;var s=c["a"].state.user;"{}"!=n()(s)&&e.axios.get("xyclickup/findByUseridAndVideoId.do",{params:{videoid:i}}).then(function(t){e.replylikeOrhald=t.data.xyuser,e.diffLikeHot()})})},hotpageGo:function(t){this.hotPage=t,this.gethotpl(t)},hotnextGo:function(t){this.hotPage=t,this.gethotpl(t)},hotprevGo:function(t){this.hotPage=t,this.gethotpl(t)}},mounted:function(){this.islogioto(),this.getpl(this.currentPage)}},V=N,E=(i("0c99"),Object(x["a"])(V,u,p,!1,null,"3bc54c8a",null)),P=E.exports,U={store:c["a"],name:"videoPaly",components:{HeaderNav:d["a"],Videopl:P},data:function(){return{video:{xyvideotype:{},xyuserinfo:{},xyuser:{}},recommendedvideo:[],videoUp:{like:!1,coin:!1,collect:!1}}},computed:{tags:function(){var t=this.video.label;return t?t.split("|"):null},user:function(){return c["a"].state.user},thisurl:function(){return location.href}},watch:{$route:function(t,e){this.getVideo(),this.$router.go(0)}},methods:{getVideo:function(){var t=this,e=this.$route.query.vdId;this.axios.get("xyvideo/findById.do",{params:{videoid:e}}).then(function(e){"{}"==n()(e.data)&&t.$router.push({name:"playerror"}),t.video=e.data.xyuser,$("#danmup").DanmuPlayer({src:t.video.videourl,imgsrc:t.video.picture,height:"500px",width:"900px",axios:t.axios,videoid:t.video.videoid,urlToGetDanmu:"xydanmu/findByVideoid.do",urlToPostDanmu:"xydanmu/insertByVideoid.do",userid:t.user.userid}),t.getRecommendedvideo(),t.diffislike(),t.diffiscoll(),t.diffisfollow()})},getRecommendedvideo:function(){var t=this;this.axios.get("xyvideo/findTypeRandForTwenty.do",{params:{typeid:this.video.typeid,label:this.tags[0]}}).then(function(e){t.recommendedvideo=e.data.xyuser})},copyurl:function(){var t=document.createElement("input");t.value=this.thisurl,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.className="oInput",t.style.display="none",this.$message({message:"复制成功快去分享吧",type:"success"})},videolike:function(){var t=this;if("{}"!==n()(this.user)){var e=this.$route.query.vdId;this.axios.get("xyvideoup/updateAddUpById.do",{params:{videoid:e}}).then(function(e){0==e.data.xyuser?(t.videoUp.like=!0,t.video.clickup++):1==e.data.xyuser&&(t.videoUp.like=!1,t.video.clickup--)})}else alert("请先登录")},videocoll:function(){var t=this;if("{}"!==n()(this.user)){var e=this.$route.query.vdId;this.axios.get("xycollection/updateAddUpById.do",{params:{videoid:e}}).then(function(e){0==e.data.xyuser?(t.videoUp.collect=!0,t.video.commendcount++):1==e.data.xyuser&&(t.videoUp.collect=!1,t.video.commendcount--)})}else alert("请先登录")},diffislike:function(){var t=this;if("{}"!==n()(this.user)){var e=this.$route.query.vdId;this.axios.get("xyvideoup/findCouByUseridAndVideoId.do",{params:{videoid:e}}).then(function(e){1==e.data.xyuser?t.videoUp.like=!0:t.videoUp.like=!1})}},diffiscoll:function(){var t=this;if("{}"!==n()(this.user)){var e=this.$route.query.vdId;this.axios.get("xycollection/findCouByUseridAndVideoId.do",{params:{videoid:e}}).then(function(e){1==e.data.xyuser?t.videoUp.collect=!0:t.videoUp.collect=!1})}},diffisfollow:function(){var t=this;"{}"!==n()(this.user)&&this.axios.get("xyfriend/findByFriend.do",{params:{userfriend:this.video.userid}}).then(function(e){0==e.data.xyuser?t.$set(t.video,"followstatus",!1):t.$set(t.video,"followstatus",!0)})},govideo:function(t){var e=this;this.axios.get("xyvideo/addclick.do",{params:{videoid:t}}).then(function(i){e.$router.push({name:"play",query:{vdId:t}})})},follow:function(){var t=this;if("{}"===n()(this.user))return this.$message({message:"请先登录",type:"warning"});this.axios.get("xyfriend/updateAddUpById.do",{params:{userfriend:this.video.userid}}).then(function(e){0==e.data.xyuser?(t.$set(t.video,"followstatus",!0),t.$message({message:"关注成功",type:"success"})):1==e.data.xyuser&&(t.$set(t.video,"followstatus",!1),t.$message({message:"取消关注成功",type:"success"}))})},getup:function(t){var e=this.$router.resolve({name:"homepage",query:{userid:t}}),i=e.href;window.open(i,"_blank")}},created:function(){},beforeMount:function(){},mounted:function(){this.getVideo()},beforeRouteEnter:function(t,e,i){var s=Number(t.query.vdId);void 0==t.query.vdId&&i({name:"playerror"}),isNaN(s)?i({name:"playerror"}):l.a.get("xyvideo/findById.do",{params:{videoid:t.query.vdId}}).then(function(t){"{}"==n()(t.data)?i({name:"playerror"}):i()})},beforeRouteLeave:function(t,e,i){i()}},A=U,G=(i("7251"),i("6886"),Object(x["a"])(A,s,o,!1,null,"5c025598",null));e["default"]=G.exports},cf4d:function(t,e,i){},d81f:function(t,e,i){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=play.cf55b11f.js.map