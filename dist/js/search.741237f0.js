(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"4e22":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"Homesearch"}},[s("HeaderNav"),s("router-view"),s("Footers")],1)},i=[],n=s("387d"),r=s("9fe9"),o={name:"search",components:{Footers:r["a"],HeaderNav:n["a"]}},l=o,c=s("2877"),u=Object(c["a"])(l,a,i,!1,null,"f1e4ab42",null);t["default"]=u.exports},"91f5":function(e,t,s){},eade:function(e,t,s){"use strict";var a=s("91f5"),i=s.n(a);i.a},f3ae:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"searchindex"},[s("div",{staticClass:"page-width"},[s("div",{staticClass:"home-form"},[s("div",{staticClass:"home-logo"}),s("div",{staticClass:"home-input clearfix",attrs:{id:"autoplact"}},[s("div",{staticStyle:{"margin-top":"15px"}},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索你想要的内容..."},on:{focus:e.showSearch,input:function(t){return e.getkeyword(e.input)}},nativeOn:{click:function(t){return e.showSearch(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchVideo(e.input)}},model:{value:e.input,callback:function(t){e.input="string"===typeof t?t.trim():t},expression:"input"}},[s("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[s("el-option",{attrs:{label:"综合",value:"1"}}),s("el-option",{attrs:{label:"视频",value:"2"}}),s("el-option",{attrs:{label:"用户",value:"3"}}),s("el-option",{attrs:{label:"相簿",value:"4"}})],1),s("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.searchVideo(e.input)}},slot:"append"},[e._v("搜索")])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.autoplshow,expression:"autoplshow"}],staticClass:"suggest-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.keywordshow,expression:"!keywordshow"}],staticClass:"hotword-wrap"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:!e.searchlist.length,expression:"!searchlist.length"}],staticClass:"vertical"},[e._m(0),e._l(e.keywordTop.slice(0,10),function(t,a){return s("li",{key:t.rankid},[s("a",{staticClass:"vt-text",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.rankname)}}},[s("span",{staticClass:"rank"},[e._v(e._s(a+1))]),e._v("\n                  "+e._s(t.rankname)+"\n                ")])])})],2),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.searchlist.length,expression:"searchlist.length"}],staticClass:"horizontal"},e._l(e.keywordTop.slice(0,8),function(t){return s("li",{key:t.rankid},[s("a",{staticClass:"hz-text",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.rankname)}}},[e._v(e._s(t.rankname))])])}),0)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.keywordshow,expression:"keywordshow"}],staticClass:"keyword-wrap"},e._l(e.inputkeyword,function(t){return s("li",{key:t.videoid},[s("a",{staticClass:"vt-text keyword",domProps:{innerHTML:e._s(e.keywords(t.videoname,e.input))},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.videoname)}}})])}),0),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.searchlist.length&&!e.keywordshow,expression:"searchlist.length&&!keywordshow"}],staticClass:"history-wrap"},[e._m(1),e._l(e.resolveArr,function(t){return s("li",{key:t.id,staticClass:"history-li"},[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.title)}}},[e._v(e._s(t.title))]),s("i",{staticClass:"clear",on:{click:function(s){return e.removersearch(t,s)}}})])}),s("li",{staticClass:"clearall"},[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removerall(t)}}},[e._v("清空搜索历史")])])],2)])]),s("div",{staticClass:"home-suggest clearfix"},[s("div",{staticClass:"hot-search"},[e._m(2),s("ul",{staticClass:"hotlist"},e._l(e.keywordTop.slice(0,10),function(t,a){return s("li",{key:t.rankid,staticClass:"item",on:{click:function(s){return e.searchVideo(t.rankname)}}},[s("span",{staticClass:"num",class:a<3?"special":""},[e._v(e._s(a+1))]),s("span",{staticClass:"word"},[e._v(e._s(t.rankname))])])}),0),s("ul",{staticClass:"hotlist"},e._l(e.keywordTop.slice(10),function(t,a){return s("li",{key:t.rankid,staticClass:"item",on:{click:function(s){return e.searchVideo(t.rankname)}}},[s("span",{staticClass:"num"},[e._v(e._s(a+11))]),s("span",{staticClass:"word"},[e._v(e._s(t.rankname))])])}),0)]),s("div",{staticClass:"history"},[s("div",{staticClass:"title"},[s("i",{staticClass:"title-icon hot"}),e._v("\n            搜索历史\n            "),s("span",{staticClass:"delete-history",on:{click:e.removerall}},[s("i",{staticClass:"icon-garbage"}),e._v("\n              清空\n            ")]),s("span",{staticClass:"subtitle"},[e._v("History")])]),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.searchlist.length,expression:"searchlist.length"}],staticClass:"list"},e._l(e.searchlist,function(t){return s("li",{key:t.id,staticClass:"item"},[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.title)}}},[e._v(e._s(t.title))])])}),0),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchlist.length,expression:"!searchlist.length"}],staticClass:"no-history"},[s("span",[e._v("没有历史纪录")])])])])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"title"},[s("span",[e._v("热搜榜")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"title"},[s("span",[e._v("搜索历史")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("i",{staticClass:"title-icon hot"}),e._v("\n            热门搜索\n            "),s("span",{staticClass:"subtitle"},[e._v("Daily Hot")])])}],n=s("75fc"),r=(s("a481"),s("3b2b"),s("f499")),o=s.n(r),l=(s("ac6a"),{fetch:function(){var e=JSON.parse(localStorage.getItem("search")||"[]");return e.forEach(function(e,t){e.id=t}),l.uid=e.length,e},save:function(e){localStorage.setItem("search",o()(e))}}),c={name:"searchindex",data:function(){return{input:"",select:"1",autoplshow:!1,searchlist:l.fetch(),keywordshow:!1,inputkeyword:[],keywordTop:[]}},watch:{searchlist:{handler:function(e){l.save(e)},deep:!0}},computed:{resolveArr:function(){var e=this.searchlist.slice(-5);return e.reverse()}},methods:{keywords:function(e,t){if(this.input.length){t=this.input;var s=new RegExp("("+t+")","g"),a=e.replace(s,"<font style='color: #f25d8e;'>$1</font>");return a}this.keywordshow=!1},showSearch:function(){this.autoplshow=!0},hideSearch:function(){var e=this,t=document.querySelector("#autoplact");$(document).click(function(s){s.preventDefault(),t.contains(s.target)||(e.autoplshow=!1)})},searchVideo:function(e){var t=this,s=e;if(s){var a=this.searchlist;a.push({id:l.uid+1,title:s});var i={};a=a.reduce(function(e,t){return!i[t.title]&&(i[t.title]=e.push(t)),e},[]),this.searchlist=Object(n["a"])(a),this.input=s,this.autoplshow=!1,this.axios.get("xyrank/insertData.do",{params:{rankname:s}}).then(function(e){t.$router.push({name:"searchall",query:{keyword:s}})})}},removersearch:function(e,t){this.searchlist.splice(this.searchlist.indexOf(e),1)},removerall:function(){this.searchlist.splice(0)},getkeyword:function(e){var t=this;if(!e.length)return this.keywordshow=!1,void(this.inputkeyword=[]);this.axios.get("xyvideo/findByLikeInIndex.do",{params:{videoname:e}}).then(function(e){e.data.xyuser.length?(t.keywordshow=!0,t.autoplshow=!0,t.inputkeyword=Object(n["a"])(e.data.xyuser)):t.autoplshow=!1})},getkeywordTop:function(){var e=this;this.axios.get("xyrank/findByClick.do",{params:{count:20}}).then(function(t){e.keywordTop=t.data.xyuser})}},mounted:function(){this.hideSearch(),this.getkeywordTop()}},u=c,h=(s("eade"),s("2877")),d=Object(h["a"])(u,a,i,!1,null,"950882a2",null);t["default"]=d.exports}}]);
//# sourceMappingURL=search.741237f0.js.map