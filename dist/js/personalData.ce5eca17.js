(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["personalData"],{"08f1":function(e,t,a){},"595a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Headnav"),e._m(0),a("div",{staticClass:"personaldata"},[a("el-tabs",{attrs:{type:"border-card","tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"首页"}},[a("div",{staticStyle:{"font-size":"20px",margin:"20px"}},[e._v("首页")]),a("hr",{attrs:{width:"95%"}}),a("div",[a("div",{staticClass:"uname"},[a("div",{staticClass:"u-img"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://111.230.247.223/SameBWeb/xyuserinfo/updateHead.do","show-file-list":!1,name:"userphoto","with-credentials":!0,"on-success":e.handleAvatarSuccess}},[a("div",{staticClass:"changehead"},[e._v("更换头像")]),a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}})])],1),a("div",{staticClass:"u-name"},[a("div",{staticClass:"b_name"},[e._v(e._s(e.ruleForm.name))]),a("div",{staticClass:"vip_type"},[e._v(e._s(e.viptype))]),a("span",{staticClass:"integral"}),a("span",[e._v(e._s(e.totalintegral))]),e._v(" \n                "),a("span",{staticClass:"gold"}),a("span",[e._v(e._s(e.usefulgold))]),a("h3"),a("font",{attrs:{size:"4px"}},[e._v("LV "+e._s(e.lv)+" ")]),a("progress",{staticStyle:{height:"20px",width:"200px"},attrs:{max:e.the_experience},domProps:{value:e.experience}}),e._v("\n                 "+e._s(e.experience)+"/"+e._s(e.the_experience)+"\n                "),a("router-link",{staticClass:"label_v",attrs:{to:{name:"homepage"}}},[e._v("个人空间")])],1)]),a("hr",{attrs:{width:"95%"}}),a("div",{staticStyle:{"font-size":"20px",margin:"20px"}},[e._v("每日奖励")]),a("div",{staticStyle:{width:"90%",margin:"0 auto"}},[a("div",{staticClass:"reward"},[a("div",{staticClass:"day_login"}),a("div",{staticClass:"blue_font"},[e._v("每日登录")])]),a("div",{staticClass:"reward"},[a("div",{staticClass:"blue_img"},[a("span",{staticClass:"blue_q"},[a("font",{attrs:{size:"5",color:"#FFFFFF"}},[e._v("10")]),a("font",{attrs:{color:"#FFFFFF"}},[e._v("EXP")])],1)]),a("div",{staticClass:"blue_font"},[e._v("发布视频")])]),a("div",{staticClass:"reward"},[a("div",{staticClass:"blue_img"},[a("span",{staticClass:"blue_q"},[a("font",{attrs:{size:"5",color:"#FFFFFF"}},[e._v("50")]),a("font",{attrs:{color:"#FFFFFF"}},[e._v("EXP")])],1)]),a("div",{staticClass:"blue_font"},[e._v("每日投币")])]),a("div",{staticClass:"reward"},[a("div",{staticClass:"blue_img"},[a("span",{staticClass:"blue_q"},[a("font",{attrs:{size:"5",color:"#FFFFFF"}},[e._v("100")]),a("font",{attrs:{color:"#FFFFFF"}},[e._v("EXP")])],1)]),a("div",{staticClass:"blue_font"},[e._v("每日分享视频")])])])])]),a("el-tab-pane",{attrs:{label:"我的信息"}},[a("div",[a("div",{staticStyle:{"font-size":"20px",margin:"20px"}},[e._v("我的信息")]),a("hr",{attrs:{width:"95%"}}),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{staticClass:"iinp",attrs:{disabled:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}}),a("span",{staticStyle:{"margin-left":"40px",color:"#C9C9C9"}},[e._v("注:用户名不可以更改")])],1),a("el-form-item",{attrs:{label:"出生年月",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date1"}},[a("el-date-picker",{staticStyle:{width:"93%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date1,callback:function(t){e.$set(e.ruleForm,"date1",t)},expression:"ruleForm.date1"}})],1)],1)],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{staticClass:"iinp",attrs:{disabled:""},model:{value:e.ruleForm.mail,callback:function(t){e.$set(e.ruleForm,"mail",t)},expression:"ruleForm.mail"}}),a("span",{staticStyle:{"margin-left":"40px",color:"#C9C9C9"}},[e._v("注:邮箱一旦绑定就无法更改")])],1),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{staticClass:"iinp",model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),a("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[a("el-input",{staticClass:"iinp",model:{value:e.ruleForm.qq,callback:function(t){e.$set(e.ruleForm,"qq",t)},expression:"ruleForm.qq"}})],1),a("el-form-item",{attrs:{label:"微信",prop:"msn"}},[a("el-input",{staticClass:"iinp",model:{value:e.ruleForm.msn,callback:function(t){e.$set(e.ruleForm,"msn",t)},expression:"ruleForm.msn"}})],1),a("el-form-item",{attrs:{label:"家庭月收入",prop:"monthincoming"}},[a("el-input",{staticClass:"iinp",model:{value:e.ruleForm.monthincoming,callback:function(t){e.$set(e.ruleForm,"monthincoming",t)},expression:"ruleForm.monthincoming"}})],1),a("el-form-item",{attrs:{label:"职业",prop:"work"}},[a("el-input",{staticClass:"iinp",model:{value:e.ruleForm.work,callback:function(t){e.$set(e.ruleForm,"work",t)},expression:"ruleForm.work"}})],1),a("el-form-item",{attrs:{label:"所在城市"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.cs,function(e){return a("el-option",{key:e.value1,attrs:{label:e.label,value:e.value1}})}),1)],1),a("el-form-item",{attrs:{label:"学历"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.xl,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"个性签名",prop:"personalized"}},[a("el-input",{staticClass:"iinp",attrs:{type:"textarea",rows:"8"},model:{value:e.ruleForm.personalized,callback:function(t){e.$set(e.ruleForm,"personalized",t)},expression:"ruleForm.personalized"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormzl("ruleForm")}}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)]),a("el-tab-pane",{attrs:{label:"会员金币"}},[a("div",{staticStyle:{"font-size":"20px",margin:"20px"}},[e._v("会员金币")]),a("hr",{attrs:{width:"95%"}}),a("el-tabs",{model:{value:e.activeName1,callback:function(t){e.activeName1=t},expression:"activeName1"}},[a("el-tab-pane",{attrs:{label:"首页",name:"first"}},[a("div",{staticClass:"Integral_page"},[a("span",{staticStyle:{display:"block","text-align":"center","margin-top":"35px"}},[a("font",{attrs:{size:"6"}},[e._v("会员金币余额")]),e._v("  \n                  "),a("font",{attrs:{size:"5",color:"#00A1D6"}},[e._v(e._s(e.usefulgold))])],1)])]),a("el-tab-pane",{attrs:{label:"金币记录",name:"second"}},[e._v("此功能暂未开放")])],1)],1),a("el-tab-pane",{attrs:{label:"我的记录"}},[a("div",[a("div",{staticStyle:{"font-size":"20px",margin:"20px"}},[e._v("我的记录")]),a("hr",{attrs:{width:"95%"}}),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"转账记录",name:"first"}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.transfer,height:"250",border:""}},[a("el-table-column",{attrs:{prop:"xyuser[1].username",label:"收账人",width:"180"}}),a("el-table-column",{attrs:{prop:"money",label:"金额"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"time",label:"操作时间"}})],1)],1)])],1)],1)]),a("el-tab-pane",{attrs:{label:"修改密码"}},[a("div",[a("div",{staticStyle:{"font-size":"20px",margin:"20px"}},[e._v("修改密码")]),a("hr",{attrs:{width:"95%"}}),a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"old"}},[a("el-input",{staticClass:"iinp",attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.old,callback:function(t){e.$set(e.ruleForm2,"old",t)},expression:"ruleForm2.old"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{staticClass:"iinp",attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{staticClass:"iinp",attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormpass("ruleForm2")}}},[e._v("修改")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)])],1)],1),a("Footer")],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("div",[a("img",{attrs:{src:"http://cdn.hwzhj.top/rl_top.35edfde.png"}})])])}],l=a("e814"),i=a.n(l),o=(a("a481"),a("3b2b"),a("7f7f"),a("387d")),n=a("9fe9"),u=a("c0d6"),c={store:u["a"],components:{Headnav:o["a"],Footer:n["a"]},data:function(){var e=this,t=function(t,a,r){var s="";e.axios.get("xyuser/findSession.do").then(function(t){e.username=t.data.xyuser.username}),e.axios.get("xyuser/findLogin.do",{params:{username:e.username,password:a}}).then(function(e){s=e.data.zt}),""===a&&r(new Error("旧密码不能为空")),setTimeout(function(){"无账号"==s?r(new Error("旧密码错误!!")):"登陆成功"==s&&r()},1e3)},a=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.ruleForm2.checkPass&&e.$refs.ruleForm2.validateField("checkPass"),r())},r=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm2.pass?r(new Error("两次输入密码不一致!")):r()};return{viptype:"",experience:"",the_experience:"",lv:"",transfer:[],totalintegral:"",usefulgold:"",userid:"",cs:[{value1:"上海",label:"上海"},{value1:"北京",label:"北京"},{value1:"永州",label:"永州"},{value1:"长沙",label:"长沙"}],xl:[{value:"博士",label:"博士"},{value:"研究生",label:"研究生"},{value:"本科",label:"本科"},{value:"大专",label:"大专"},{value:"高中及以下",label:"高中及以下"}],value1:"",value:"",username:"",activeName1:"first",activeName:"first",user:"",imageUrl:"",ruleForm2:{old:"",pass:"",checkPass:""},ruleForm:{name:"",date1:"",gender:"",personalized:"",qq:"",msn:"",monthincoming:"",phone:"",work:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}]},rules2:{pass:[{validator:a,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}],old:[{validator:t,trigger:"blur"}]}}},methods:{submitFormpass:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.get("xyuser/updatePasswordByUserId.do",{params:{password:t.ruleForm2.checkPass}}).then(function(e){t.axios.get("xyuser/desSession.do").then(function(e){t.$message({type:"success",message:"修改密碼成功請重新登錄!",duration:2e3}),u["a"].commit("setuser",{}),t.$router.push({name:"login"})})})})},submitFormzl:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm;t.axios.post("xyuserinfo/updateByUserIdFront.do",{userid:t.userid,username:a.name,birthday:t.format(a.date1),monthincoming:a.monthincoming,msn:a.msn,phone:a.phone,qq:a.qq,sex:a.gender,usershow:a.personalized,work:a.work,city:t.value1,schooling:t.value}).then(function(e){t.$notify({title:"成功",message:"修改资料成功",type:"success"})})})},resetForm:function(e){this.$refs[e].resetFields()},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.$notify({title:"成功",message:"部分功能将会再下次登录生效",type:"success"})},format:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();return r=r<10?"0"+r:r,t+"-"+a+"-"+r},toDate:function(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})([T\\s](\\d{2}):(\\d{2}):(\\d{2})(\\.(\\d{3}))?)?.*");if(t.test(e)){var a=e.replace(t,function(e,t,a,r,s,l,i,o,n,u){var c=new Date(t,a-1,r,l||"00",i||"00",o||"00",u||"00");return c.getTime()}),r=new Date;return r.setTime(a),r}return null}},mounted:function(){var e=this;this.user=u["a"].state.user,this.imageUrl=this.user.xyuserinfo.userphoto,this.axios.get("xyuser/findSession.do").then(function(t){e.userid=t.data.xyuser.userid,e.axios.get("xyuser/findUserinfoById.do",{params:{userid:t.data.xyuser.userid}}).then(function(t){var a=t.data.xyuser,r=e.ruleForm;r.name=a.username,r.gender=a.xyuserinfo.sex,r.date1=e.toDate(a.xyuserinfo.birthday),r.personalized=a.xyuserinfo.usershow,r.msn=a.xyuserinfo.msn,r.qq=a.xyuserinfo.qq,r.phone=a.xyuserinfo.phone,r.monthincoming=a.xyuserinfo.monthincoming,r.work=a.xyuserinfo.work,r.mail=a.useremail,e.value1=a.xyuserinfo.city,e.value=a.xyuserinfo.schooling,e.totalintegral=a.totalintegral,e.usefulgold=a.usefulgold;var s=i()(e.totalintegral);s<=100?(e.viptype="小白",e.experience=s-0,e.the_experience=100,e.lv=1):s<=400?(e.viptype="普通会员",e.experience=s-100,e.the_experience=300,e.lv=2):s<=1200?(e.viptype="中级会员",e.experience=s-400,e.the_experience=800,e.lv=3):s<=2700?(e.viptype="高级会员",e.experience=s-1200,e.the_experience=1500,e.lv=4):s<=5700?(e.viptype="钻石会员",e.experience=s-2700,e.the_experience=3e3,e.lv=5):s<=999999?(e.viptype="至尊会员",e.experience=s-3e3,e.the_experience=999999,e.lv=6):(e.lv=6,e.viptype="至尊会员",e.the_experience=999999,e.experience=s-3600)}),e.axios.get("xytransfer/findByUserId.do",{params:{userid:t.data.xyuser.userid}}).then(function(t){e.transfer=t.data.xyuser})})}},m=c,p=(a("6c6a"),a("2877")),d=Object(p["a"])(m,r,s,!1,null,"d93698c6",null);t["default"]=d.exports},"6c6a":function(e,t,a){"use strict";var r=a("08f1"),s=a.n(r);s.a}}]);
//# sourceMappingURL=personalData.ce5eca17.js.map