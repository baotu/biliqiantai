(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["photoDetail"],{"20d1":function(t,e,a){t.exports=a.p+"img/kong.7043a091.png"},"4c4f":function(t,e,a){"use strict";var s=a("a784"),n=a.n(s);n.a},a784:function(t,e,a){},aa77:function(t,e,a){var s=a("5ca1"),n=a("be13"),i=a("79e5"),r=a("fdef"),o="["+r+"]",u="​",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t,e,a){var n={},o=i(function(){return!!r[t]()||u[t]()!=u}),c=n[t]=o?e(m):r[t];a&&(n[a]=c),s(s.P+s.F*o,"String",n)},m=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},c3ec:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"photoDetail"},[s("HeaderNav"),s("div",{staticStyle:{margin:"50px auto",width:"80%"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.albumLength,expression:"albumLength == 1"}],staticClass:"photo"},[s("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"10px"}},[s("p",{staticStyle:{float:"right"}},[s("el-dropdown",[s("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"12px",color:"#ccc"}},[t._v("\n\t\t\t\t\t\t\t编辑"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("router-link",{attrs:{to:{name:"insertAlbum",query:{albumId:t.albumId}}}},[t._v("编辑相簿")])],1),s("el-dropdown-item",[s("span",{on:{click:t.deleteAlbum}},[t._v("删除")])])],1)],1)],1),s("br")]),s("div",{staticClass:"p-title"},[s("div",[s("span",[t._v(t._s(t.userAlbum[0].xyalbum.albumname))]),s("span",[t._v(t._s(t.userAlbum[0].time))])]),t._m(0)]),s("div",{staticClass:"p-content"},[s("div",{staticClass:"p-text"},[t._v(t._s(t.albumName))]),t._l(t.userAlbum,function(t,e){return s("div",{key:e,staticClass:"p-img"},[s("img",{attrs:{src:t.url}})])})],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.albumLength,expression:"albumLength == 0"}],staticClass:"photo"},[s("div",{staticStyle:{"text-align":"center",height:"500px",padding:"100px","box-sizing":"border-box"}},[s("img",{attrs:{src:a("20d1"),alt:""}}),s("p",{staticStyle:{color:"#ccc","padding-bottom":"20px"}},[t._v("当前相簿还没有相片……")]),s("router-link",{attrs:{to:{name:"insertAlbum",query:{albumId:t.albumId,albumName:t.albumName}}}},[t._v("点此去添加相片")])],1)]),s("photoComment",{attrs:{user:t.user,albumId:t.albumId}}),1==t.albumLength?s("div",{staticClass:"u-fix"},[s("div",{staticClass:"u-info"},[s("router-link",{attrs:{to:{name:"homepage",query:{userid:t.userAlbum[0].xyuser.userid}}}},[s("img",{attrs:{src:t.userAlbum[0].xyuserinfo.userphoto}})]),s("div",{staticStyle:{width:"120px",margin:"0 auto","text-align":"center","padding-bottom":"20px"}},[s("p",{staticClass:"p-text"},[t._v(t._s(t.userAlbum[0].xyuser.username))]),s("router-link",{attrs:{to:{name:"contribute",query:{userid:t.userAlbum[0].xyuser.userid}}}},[s("span",[t._v("视频")])]),t._v("|\n\t\t\t\t\t"),s("router-link",{attrs:{to:{name:"channel",query:{userid:t.userAlbum[0].xyuser.userid}}}},[s("span",[t._v("相簿")])])],1),s("div",{staticStyle:{width:"180px",margin:"0 auto","text-align":"center"}},[s("span",{staticClass:"atten",on:{click:t.guanzhu}},[t._v("关注")]),s("span",{staticClass:"send"},[t._v("发消息")])])],1),s("div",{staticClass:"u-like"},[s("div",[s("div",{staticClass:"qzc",on:{click:t.like}}),s("span",[t._v("求支持(/▽\\)")])]),s("div",[s("div",{staticClass:"coll",on:{click:t.collect}}),s("a",{staticStyle:{display:"block","text-align":"center"}},[t._v("收藏")])])])]):t._e()],1),s("Footer")],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{float:"right"}},[a("span",[t._v("浏览：16 ")]),a("span",[t._v("收藏：0")])])}],i=a("75fc"),r=a("387d"),o=a("9fe9"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"photoComment"},[a("div",{staticClass:"commentAll",staticStyle:{"margin-top":"20px"}},[a("p",{staticStyle:{color:"rgb(0,131,231)","border-bottom":"1px solid #ccc",padding:"5px 10px","font-weight":"800"}},[t._v("全部评论")]),a("div",{staticClass:"comment-list"},[t.user.userid?a("div",{staticClass:"comment"},[a("div",{staticClass:"c-left"},[a("img",{attrs:{src:t.user.xyuserinfo.userphoto}})]),a("div",{staticClass:"c-right"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-button",{staticStyle:{"line-height":"20px"},attrs:{type:"primary"},on:{click:t.addComment}},[t._v("发表"),a("br"),t._v("评论")])],1)]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.userid,expression:"!user.userid"}],staticClass:"comment"},[t._m(0),a("div",{staticClass:"c-right"},[a("p",{staticClass:"p-text"},[t._v("请先\n\t\t\t\t\t\t"),a("router-link",{attrs:{to:{name:"login"}}},[t._v("登录")]),t._v("\n\t\t\t\t\t再评论")],1),a("el-input",{attrs:{type:"textarea",disabled:"",autosize:{minRows:3,maxRows:3},placeholder:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-button",{staticStyle:{"line-height":"20px"},attrs:{type:"primary",disabled:""}},[t._v("发表"),a("br"),t._v("评论")])],1)]),t._l(t.pComment.xyuser,function(e,s){return a("div",{key:s,staticClass:"comment"},[a("div",{staticClass:"c-left"},[a("img",{attrs:{src:e.xyuserinfo.userphoto}})]),a("div",{staticClass:"c-right"},[a("p",[t._v(t._s(e.xyuser.username))]),a("p",{staticClass:"p-text"},[t._v(t._s(e.content))]),a("div",[a("span",[t._v(t._s(e.time))])]),e.xyuser.username==t.user.username?a("span",{staticStyle:{float:"right"},on:{click:function(a){return t.deleteComment(e.commentid)}}},[t._v("删除")]):t._e()])])}),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pComment.count,expression:"pComment.count"}],staticStyle:{"text-align":"center",display:"block","padding-top":"30px"},attrs:{background:"",layout:"prev, pager, next","page-size":5,total:t.pComment.count},on:{"current-change":t.handleCurrentChange}})],2)])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-left"},[a("img",{attrs:{src:"http://cdn.hwzhj.top/img/default.gif"}})])}],l=(a("c5f6"),{data:function(){return{textarea:"",pComment:{xyuser:{},xyuserinfo:{}}}},props:{user:Object,albumId:Number},computed:{ValbumId:function(){return this.albumId}},watch:{ValbumId:function(t,e){this.handleCurrentChange(1)}},mounted:function(){this.handleCurrentChange(1)},methods:{addComment:function(){var t=this;this.axios.post("xypgotocomment/insetByUserIdAndPhotoId.do",{photoid:this.ValbumId,content:this.textarea}).then(function(e){e.data.xyuser&&(t.textarea="",t.handleCurrentChange(1))})},handleCurrentChange:function(t){var e=this;this.axios.get("xypgotocomment/findPageByPhotoId.do",{params:{photoid:this.ValbumId,page:t}}).then(function(t){e.pComment=t.data})},deleteComment:function(t){var e=this;this.$confirm("此操作将永久删除该评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("xypgotocomment/deleteByCommentId.do",{params:{commentid:t}}).then(function(t){1==t.data.xyuser?(e.$message({type:"success",message:"删除成功!"}),e.handleCurrentChange(1)):e.$message({type:"error",message:"删除失败!请重试"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}}),d=l,m=(a("4c4f"),a("2877")),p=Object(m["a"])(d,u,c,!1,null,"4308503b",null),h=p.exports,f=a("c0d6"),g={store:f["a"],data:function(){return{albumName:"",albumId:0,albumLength:1,userAlbum:[{time:"",xyalbum:{},xyuser:{},xyuserinfo:{userphoto:""}}],user:{xyuserinfo:{}}}},components:{HeaderNav:r["a"],Footer:o["a"],photoComment:h},mounted:function(){this.user=f["a"].state.user,this.getPhoto1()},methods:{getPhoto1:function(){var t=this;this.albumId=1*this.$route.query.albumId,this.axios.get("xyphoto/findByAlbumId.do",{params:{albumid:this.albumId}}).then(function(e){console.log(e.data.xyuser),e.data.xyuser.length?t.userAlbum=Object(i["a"])(e.data.xyuser):t.albumLength=e.data.xyuser.length,t.axios.get("xyfriend/findByFriend.do",{params:{userfriend:t.userAlbum[0].xyuser.userid}}).then(function(t){1==t.data.xyuser&&($(".atten").attr("class","att"),$(".att").html("已关注"))})}),this.user.userid&&(this.axios.get("xyalnumclick/findCouByUseridAndVideoId.do",{params:{albumid:this.albumId}}).then(function(t){1==t.data.xyuser&&$(".qzc").attr("class","yzc")}),this.axios.get("xyalbumcollection/findCouByUseridAndVideoId.do",{params:{albumid:this.albumId}}).then(function(t){1==t.data.xyuser&&$(".coll").attr("class","ycoll")}))},deleteAlbum:function(){var t=this;this.$confirm("此操作将永久删除该相簿, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.get("xyalbum/deleteByAlbumid.do",{params:{albumid:t.albumId}}).then(function(e){1==e.data.xyuser?(t.$message({type:"success",message:"删除成功!",duration:1e3}),t.$router.push({name:"channel"})):t.$message({type:"error",message:"删除失败!请重试",duration:1e3})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},like:function(){var t=this;this.user.userid?this.axios.get("xyalnumclick/updateAddUpById.do",{params:{albumid:this.albumId}}).then(function(e){0==e.data.xyuser?($(".qzc").attr("class","yzc"),t.$message({type:"success",message:"蟹蟹(*^▽^*)!",duration:1e3})):($(".yzc").attr("class","qzc"),t.$message({type:"success",message:"已取消点赞o(╥﹏╥)o!",duration:1e3}))}):this.$message({type:"success",message:"请先登录！",duration:1e3})},collect:function(){var t=this;this.user.userid?this.axios.get("xyalbumcollection/updateAddUpById.do",{params:{albumid:this.albumId}}).then(function(e){0==e.data.xyuser?($(".coll").attr("class","ycoll"),t.$message({type:"success",message:"蟹蟹(*^▽^*)!",duration:1e3})):($(".ycoll").attr("class","coll"),t.$message({type:"success",message:"已取消收藏o(╥﹏╥)o!",duration:1e3}))}):this.$message({type:"success",message:"请先登录！",duration:1e3})},guanzhu:function(){this.user.userid?this.user.userid==this.userAlbum[0].xyuser.userid?this.$message({type:"success",message:"不能关注自己o(╥﹏╥)o!",duration:1e3}):this.axios.get("xyfriend/updateAddUpById.do",{params:{userfriend:this.userAlbum[0].xyuser.userid}}).then(function(t){0==t.data.xyuser?($(".atten").attr("class","att"),$(".att").html("已关注")):($(".att").attr("class","atten"),$(".atten").html("关注"))}):this.$message({type:"success",message:"请先登录!",duration:1e3})}},beforeRouteEnter:function(t,e,a){t.query.albumId||a({name:"indexBody"}),a()}},x=g,y=(a("dc3a"),Object(m["a"])(x,s,n,!1,null,"6e2e7190",null));e["default"]=y.exports},c5f6:function(t,e,a){"use strict";var s=a("7726"),n=a("69a8"),i=a("2d95"),r=a("5dbc"),o=a("6a99"),u=a("79e5"),c=a("9093").f,l=a("11e9").f,d=a("86cc").f,m=a("aa77").trim,p="Number",h=s[p],f=h,g=h.prototype,x=i(a("2aeb")(g))==p,y="trim"in String.prototype,b=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():m(e,3);var a,s,n,i=e.charCodeAt(0);if(43===i||45===i){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+e}for(var r,u=e.slice(2),c=0,l=u.length;c<l;c++)if(r=u.charCodeAt(c),r<48||r>n)return NaN;return parseInt(u,s)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof h&&(x?u(function(){g.valueOf.call(a)}):i(a)!=p)?r(new f(b(e)),a,h):b(e)};for(var v,C=a("9e1e")?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;C.length>_;_++)n(f,v=C[_])&&!n(h,v)&&d(h,v,l(f,v));h.prototype=g,g.constructor=h,a("2aba")(s,p,h)}},cfab:function(t,e,a){},dc3a:function(t,e,a){"use strict";var s=a("cfab"),n=a.n(s);n.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=photoDetail.8411b9fa.js.map