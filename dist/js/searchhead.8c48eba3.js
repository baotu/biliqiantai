(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["searchhead"],{7709:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-width"},[s("div",{staticClass:"head-contain"},[s("div",{staticClass:"search-wrap"},[s("div",{attrs:{id:"search-wrapAll"}},[s("div",{staticClass:"logo-input clearfix"},[s("router-link",{staticClass:"search-logo",attrs:{to:{name:"search"}}}),s("div",{staticClass:"search-block"},[s("div",{staticClass:"input-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.input,expression:"input",modifiers:{trim:!0}}],attrs:{type:"text",id:"search-keyword",maxlength:"100",autocomplete:"off"},domProps:{value:e.input},on:{focus:e.showSearch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchVideo(e.input)},input:[function(t){t.target.composing||(e.input=t.target.value.trim())},function(t){return e.getkeyword(e.input)}],blur:function(t){return e.$forceUpdate()}},nativeOn:{click:function(t){return e.showSearch(t)}}})]),s("div",{staticClass:"search-button",on:{click:function(t){return e.searchVideo(e.input)}}},[s("i",{staticClass:"icon-search-white"}),s("span",{staticClass:"search-text"},[e._v("搜索")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.autoplshow,expression:"autoplshow"}],staticClass:"suggest-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.keywordshow,expression:"!keywordshow"}],staticClass:"hotword-wrap"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:!e.searchlist.length,expression:"!searchlist.length"}],staticClass:"vertical"},[e._m(0),e._l(e.keywordTop.slice(0,10),function(t,a){return s("li",{key:t.rankid},[s("a",{staticClass:"vt-text",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.rankname)}}},[s("span",{staticClass:"rank"},[e._v(e._s(a+1))]),e._v("\n                    "+e._s(t.rankname)+"\n                  ")])])})],2),e.searchlist.length?s("ul",{staticClass:"horizontal"},e._l(e.keywordTop.slice(0,8),function(t){return s("li",{key:t.rankid},[s("a",{staticClass:"hz-text",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.rankname)}}},[e._v(e._s(t.rankname))])])}),0):e._e()]),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.keywordshow,expression:"keywordshow"}],staticClass:"keyword-wrap"},e._l(e.inputkeyword,function(t){return s("li",{key:t.videoid},[s("a",{staticClass:"vt-text keyword",domProps:{innerHTML:e._s(e.keywords(t.videoname,e.input))},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.videoname)}}})])}),0),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.searchlist.length&&!e.keywordshow,expression:"searchlist.length&&!keywordshow"}],staticClass:"history-wrap"},[e._m(1),e._l(e.resolveArr,function(t){return s("li",{key:t.id,staticClass:"history-li"},[s("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.searchVideo(t.title)}}},[e._v(e._s(t.title))]),s("i",{staticClass:"clear",on:{click:function(s){return e.removersearch(t,s)}}})])}),s("li",{staticClass:"clearall"},[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removerall(t)}}},[e._v("清空搜索历史")])])],2)])],1)])]),s("div",{staticClass:"nav-wrap"},[s("ul",{staticClass:"wrap clearfix"},[s("li",{staticClass:"sub",class:"searchall"==e.searchpath?"active":"",on:{click:function(t){return e.tosearch("searchall")}}},[e._v("\n          综合\n          "),s("span",{staticClass:"num",staticStyle:{}})]),s("li",{staticClass:"sub",class:"searchvideo"==e.searchpath?"active":"",on:{click:function(t){return e.tosearch("searchvideo")}}},[e._v("视频\n          ")]),s("li",{staticClass:"sub",class:"searchuser"==e.searchpath?"active":"",on:{click:function(t){return e.tosearch("searchuser")}}},[e._v("用户\n          ")]),s("li",{staticClass:"sub",class:"searchphoto"==e.searchpath?"active":"",on:{click:function(t){return e.tosearch("searchphoto")}}},[e._v("相簿\n          ")])]),s("div",{staticClass:"hover-bar",style:{left:e.hoverbaroff}})])]),s("div",{staticClass:"body-contain"},[s("router-view")],1)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"title"},[s("span",[e._v("热搜榜")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"title"},[s("span",[e._v("搜索历史")])])}],i=s("75fc"),n=(s("a481"),s("3b2b"),s("7f7f"),s("f499")),o=s.n(n),c=(s("ac6a"),{fetch:function(){var e=JSON.parse(localStorage.getItem("search")||"[]");return e.forEach(function(e,t){e.id=t}),c.uid=e.length,e},save:function(e){localStorage.setItem("search",o()(e))}}),h={name:"searchall",data:function(){return{hoverbaroff:"",input:"",autoplshow:!1,keywordshow:!1,searchlist:c.fetch(),inputkeyword:[],keywordTop:[]}},watch:{searchlist:{handler:function(e){c.save(e)},deep:!0}},computed:{searchpath:function(){return this.$route.name},resolveArr:function(){var e=this.searchlist.slice(-5);return e.reverse()}},methods:{hoverbar:function(){var e=this.$route.name;"searchall"==e&&(this.hoverbaroff="0px"),"searchvideo"==e&&(this.hoverbaroff="114px"),"searchuser"==e&&(this.hoverbaroff="228px"),"searchphoto"==e&&(this.hoverbaroff="342px")},keywords:function(e,t){if(this.input.length){t=this.input;var s=new RegExp("("+t+")","g"),a=e.replace(s,"<font style='color: #f25d8e;'>$1</font>");return a}this.keywordshow=!1},barYun:function(){var e=this;$(".nav-wrap li").mouseleave(function(t){$(".nav-wrap .hover-bar").css({left:e.hoverbaroff})}).mouseenter(function(e){$(".nav-wrap .hover-bar").css({left:$(this).position().left})}).click(function(t){e.hoverbaroff=$(this).position().left,$(".nav-wrap .hover-bar").css({left:e.hoverbaroff})})},tosearch:function(e){this.input.length?this.$router.push({name:e,query:{keyword:this.input}}):this.$router.push({name:e})},showSearch:function(){this.autoplshow=!0},hideSearch:function(){var e=this,t=document.querySelector("#search-wrapAll");$(document).click(function(s){s.preventDefault(),t.contains(s.target)||(e.autoplshow=!1)})},searchVideo:function(e){var t=this,s=e;if(s){var a=this.searchlist;a.push({id:c.uid+1,title:s});var r={};a=a.reduce(function(e,t){return!r[t.title]&&(r[t.title]=e.push(t)),e},[]),this.searchlist=Object(i["a"])(a),this.input=s,this.autoplshow=!1;var n=this.$route.name;this.axios.get("xyrank/insertData.do",{params:{rankname:s}}).then(function(e){t.$router.push({name:n,query:{keyword:s}})})}},removersearch:function(e,t){this.searchlist.splice(this.searchlist.indexOf(e),1)},removerall:function(){this.searchlist.splice(0)},getkeyword:function(e){var t=this;if(!e.length)return this.keywordshow=!1,void(this.inputkeyword=[]);this.axios.get("xyvideo/findByLikeInIndex.do",{params:{videoname:e}}).then(function(e){e.data.xyuser.length?(t.keywordshow=!0,t.autoplshow=!0,t.inputkeyword=Object(i["a"])(e.data.xyuser)):t.autoplshow=!1})},getkeywordTop:function(){var e=this;this.axios.get("xyrank/findByClick.do",{params:{count:20}}).then(function(t){e.keywordTop=t.data.xyuser})}},mounted:function(){this.barYun(),this.hideSearch();var e=this.$route.query.keyword;void 0!=e&&(this.input=e),this.getkeywordTop(),this.hoverbar()}},l=h,u=(s("c6e6"),s("2877")),v=Object(u["a"])(l,a,r,!1,null,"4eaaf1e5",null);t["default"]=v.exports},"8be5":function(e,t,s){},c6e6:function(e,t,s){"use strict";var a=s("8be5"),r=s.n(a);r.a}}]);
//# sourceMappingURL=searchhead.8c48eba3.js.map